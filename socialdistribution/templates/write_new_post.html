<!-- The following written with completion assistance from Microsoft, Copilot/ ChatGPT, OpenAI 2025-06-18 -->
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <link rel="stylesheet" href="{% static 'css/write_new_post.css' %}">
    <title>New Post</title>
</head>
<body data-authenticated="{% if user.is_authenticated %}1{% else %}0{% endif %}">
    {% include "navbar.html" %}
    <h1>New Post</h1>
    <form id="new-post-form" class="post-form">
        {% csrf_token %}
        <label for="title">Title</label>
        <input type="text" id="title" name="title" placeholder="Value">

        <label for="description">Description</label>
        <input type="text" id="description" name="description" placeholder="Short summary">

        <div class="editor-container">
        <!-- Markdown editor -->
            <div>
                <label for="content">Content</label>
                <textarea id="content" name="content" placeholder="Write your postâ€¦"></textarea>
            </div>
        <!-- Live preview -->
            <div>
                <label>Preview</label>
                <div id="preview"></div>
            </div>
        </div>

        <button type="button" id="uploadImageBtn" class="file-select-btn" style="display: none;">Upload Image</button>
        <input type="file" id="image" accept="image/*" class="hidden-file-input">
        <button type="button" id="insertImageBtn" class="file-select-btn" style="display: none;">Insert Image</button>

        <label for="contentType">Content Format</label>
        <select id="contentType" name="contentType">
            <option value="text/plain">Plain text</option>
            <option value="text/markdown">CommonMark</option>
            <option value="image">Image only</option>
        </select>
        
        <label>Visibility</label>
        <div style="display: flex; gap: 20px;">
            <label>
                <input type="radio" name="visibility" value="public" checked>
                Public
            </label>
            <label>
                <input type="radio" name="visibility" value="unlisted">
                Unlisted
            </label>
            <label>
                <input type="radio" name="visibility" value="friends">
                Friends-only
            </label>
        </div>


        <div style="margin-top: 20px; display: flex; gap: 10px;">
            <button type="button" class="cancel-btn" >Cancel</button>
            <button type="button" class="post-btn">Post</button>
        </div>
    </form>

    <script type="module" src="{% static 'livePreview.min.js' %}"></script>
    <script type="module" src="{% static 'writePost.min.js' %}"></script>
</body>


</html>